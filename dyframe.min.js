/*!
 * @license Dyframe
 * (c) 2015 Tanjo, Hiroyuki. https://github.com/htanjo/dyframe
 * License: MIT
 */
(function(){"use strict";var t={tablet:768,tabletLandscape:1024,smartphone:375,smartphoneLandscape:667},e=980,i={html:"",width:e,profile:""},o=function(t,e){this.element=t,this.wrapper=document.createElement("div"),this.viewport=document.createElement("iframe"),n(this.wrapper,{position:"relative",display:"block",height:0,padding:0,overflow:"hidden"}),n(this.viewport,{position:"absolute",top:0,left:0,bottom:0,height:"100%",width:"100%",border:0,webkitTransformOrigin:"0 0",msTransformOrigin:"0 0",transformOrigin:"0 0"}),this.wrapper.appendChild(this.viewport),t.appendChild(this.wrapper),this.render(e)};o.prototype.render=function(t){"object"==typeof t&&this.updateOptions(t),this.width=this.element.clientWidth,this.height=this.element.clientHeight,this.wrapper.style.paddingBottom=this.height+"px",this.scale(),this.viewport.contentWindow.document.open(),this.viewport.contentWindow.document.write(this.options.html),this.viewport.contentWindow.document.close()},o.prototype.updateOptions=function(t){this.options?r(this.options,t):this.options=r({},i,t)},o.prototype.scale=function(){var t=this.width/this.getPreviewWidth();n(this.viewport,{width:100/t+"%",height:100/t+"%",webkitTransform:"scale("+t+")",msTransform:"scale("+t+")",transform:"scale("+t+")"})},o.prototype.getPreviewWidth=function(){if(!this.options.profile||!t[this.options.profile])return this.options.width;var i=this.getViewportData(),o=i.width;return o?"device-width"===o?t[this.options.profile]:parseInt(o,10):e},o.prototype.getViewportData=function(){var t,e,i=document.createElement("div"),o={};return i.innerHTML=this.options.html,(t=i.querySelector('meta[name="viewport"]'))&&(e=t.getAttribute("content"))?(e.split(",").forEach(function(t){var e=t.trim().split("=");e[0]&&e[1]&&(o[e[0].trim()]=e[1].trim())}),o):o};var r=function(){var t,e,i=arguments[0];for(t=1;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&(i[e]=arguments[t][e]);return i},n=function(t,e){var i;for(i in e)t.style[i]=e[i]};if("object"==typeof module&&"object"==typeof module.exports)module.exports=o;else{var s="undefined"!=typeof window?window:this;s.Dyframe=o}}).call(this);